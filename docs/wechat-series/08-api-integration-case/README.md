# 08｜API 集成实战：可控、可审计、不泄露的最小安全规范

关键词：cursor, claude code, skills, skill

API 集成类 Skill 往往“调通很快，翻车也很快”。原因不在于 API 难，而在于：**一旦可发起任意请求、或泄露密钥，你的 Skill 就不可上线**。

## 1）先立规矩：最小安全规范（4 条）

1. **密钥不入库**：只放环境变量/本地配置，绝不提交
2. **请求白名单**：只允许固定域名/路径，不做“任意 URL 请求”
3. **日志脱敏**：任何日志/错误输出不得包含 token、密钥、隐私数据
4. **失败可恢复**：超时/限流/鉴权失败要给可行动提示（重试/检查配置）

这四条做到位，才有“能对外用”的基础。

## 2）本仓库的参考项目

看 `examples/06-api-integration/`，你会看到最典型的分工：

- 脚本负责：请求构造、异常处理、返回结构化结果
- Skill 负责：输入参数约束、输出报告格式、用户沟通

## 3）“可审计”意味着什么

团队落地时建议至少做到：

- 记录“调用了哪个接口、耗时、结果码”（但不记录敏感内容）
- 明确每个参数的来源（用户输入/配置文件/环境变量）

这样当出现问题，你能定位“是数据不对、权限不对、还是规则不对”。

## 4）判断题（欢迎评论区回复“对/错”）

**判断题：** API Skill 为了更通用，允许用户输入任意 URL 去请求，是一种合理的设计。（对 / 错？）

